<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Server Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 10px; }
        th { background-color: #f4f4f4; }
        .positive { color: green; }
        .negative { color: red; }
    </style>
</head>
<body>
    <h1>Eco Server Dashboard</h1>
    <h2>Plants</h2>
    <table id="plantsTable">
        <tr>
            <th>Name</th>
            <th>Creation Day Quantity</th>
            <th>Current Day Quantity</th>
            <th>Balance</th>
        </tr>
    </table>
    <h2>Animals</h2>
    <table id="animalsTable">
        <tr>
            <th>Name</th>
            <th>Creation Day Quantity</th>
            <th>Current Day Quantity</th>
            <th>Balance</th>
        </tr>
    </table>
    <script>
        const SERVER_URL = 'https://giant-panda.play.eco/';
        const plantsList = ["OakTree", "PineTree", "Rice"];
        const animalsList = ["Deer", "Bison", "Wolf"];

        async function getServerDaysRunning() {
            const response = await fetch(`${SERVER_URL}info`);
            const data = await response.json();
            return data.DaysRunning;
        }

        async function fetchData(speciesList, type) {
            const serverDaysRunning = await getServerDaysRunning();
            const table = document.getElementById(`${type}Table`);

            for (let species of speciesList) {
                const response = await fetch(`${SERVER_URL}datasets/get?dataSet=${species}Species&dayStart=0&dayEnd=${serverDaysRunning}`);
                const data = await response.json();
                const creationDayQuantity = data.Values[0];
                const currentDayQuantity = data.Values[data.Values.length - 1];
                const balance = (currentDayQuantity - creationDayQuantity).toFixed(1);
                
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${species}</td>
                    <td>${creationDayQuantity.toFixed(1)}</td>
                    <td>${currentDayQuantity.toFixed(1)}</td>
                    <td class="${balance > 0 ? 'positive' : 'negative'}">${balance}</td>
                `;
                table.appendChild(row);
            }
        }

        fetchData(plantsList, "plants");
        fetchData(animalsList, "animals");
    </script>
</body>
</html>
